<div class="action-item">
  <% if user_signed_in? %>
    <% if post.liked_by?(current_user) %>
      <%= button_to unlike_post_path(post), method: :delete, remote: true, 
            class: "btn btn-link btn-sm text-danger p-0" do %>
        <i class="icon icon-heart-filled" aria-hidden="true"></i>
        <span><%= post.likes_count %></span>
      <% end %>
    <% else %>
      <%= button_to like_post_path(post), method: :post, remote: true,
            class: "btn btn-link btn-sm text-muted p-0" do %>
        <i class="icon icon-heart" aria-hidden="true"></i>
        <span><%= post.likes_count %></span>
      <% end %>
    <% end %>
  <% else %>
    <span class="text-muted">
      <i class="icon icon-heart" aria-hidden="true"></i>
      <span><%= post.likes_count %></span>
    </span>
  <% end %>
</div>